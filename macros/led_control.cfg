# WARNING: DO NOT EDIT THIS FILE
# To override settings from this file, you can copy and paste the relevant
# sections into your printer.cfg and change it there.

#####
# LED CONTROL
#####

[gcode_macro _LED_START_PRINTING]
gcode:
	_LED_ACTION

[gcode_macro _LED_START_PRINTING_ERROR]
gcode:
	_LED_ERROR

[gcode_macro _LED_PRINTING]
gcode:
	_LED_ON TOOLHEAD={params.TOOLHEAD|default(-1)|int}

[gcode_macro _LED_PAUSE]
gcode:
	_LED_ACTION

[gcode_macro _LED_CHAMBER_FILTER_ON]
gcode:
	_LED_ACTION

[gcode_macro _LED_CHAMBER_FILTER_OFF]
gcode:
	_LED_STANDBY
	
[gcode_macro _LED_LOADING_FILAMENT]
gcode:
	_LED_ACTION TOOLHEAD={params.TOOLHEAD|default(-1)|int}

[gcode_macro _LED_FILAMENT_LOADED]
gcode:
	_LED_SUCCESS TOOLHEAD={params.TOOLHEAD|default(-1)|int}

[gcode_macro _LED_FILAMENT_RUNOUT]
gcode:
	_LED_ERROR TOOLHEAD={params.TOOLHEAD|default(-1)|int}

[gcode_macro _LED_FILAMENT_CLOG]
gcode:
	_LED_ERROR TOOLHEAD={params.TOOLHEAD|default(-1)|int}

[gcode_macro _LED_UNLOADING_FILAMENT]
gcode:
	_LED_ACTION TOOLHEAD={params.TOOLHEAD|default(-1)|int}

[gcode_macro _LED_FILAMENT_UNLOADED]
gcode:
	_LED_SUCCESS TOOLHEAD={params.TOOLHEAD|default(-1)|int}

[gcode_macro _LED_DEACTIVATE_TOOLHEAD]
gcode:
	_LED_OFF TOOLHEAD={params.TOOLHEAD|default(-1)|int}

[gcode_macro _LED_TOOLHEAD_STANDBY]
gcode:
	_LED_STANDBY TOOLHEAD={params.TOOLHEAD|default(-1)|int}

[gcode_macro _LED_TOOLHEAD_WAKEUP]
gcode:
	_LED_ACTION TOOLHEAD={params.TOOLHEAD|default(-1)|int}

[gcode_macro _LED_MOTORS_OFF]
gcode:
	_LED_STANDBY
	_LED_VAOC_OFF

[gcode_macro _LED_INPUT_SHAPER_START]
gcode:
	_LED_ACTION

[gcode_macro _LED_INPUT_SHAPER_END]
gcode:
	_LED_ON

[gcode_macro _LED_VAOC_ON]
gcode:
	{% if printer['neopixel vaoc_led'] is defined %}
		SET_LED LED=vaoc_led RED=1.0 GREEN=1.0 BLUE=1.0
	{% endif %}

[gcode_macro _LED_VAOC_OFF]
gcode:
	{% if printer['neopixel vaoc_led'] is defined %}
		SET_LED LED=vaoc_led RED=0.0 GREEN=0.0 BLUE=0.0
	{% endif %}

[gcode_macro _LED_ACTION]
gcode:
	_LED_SET TOOLHEAD={params.TOOLHEAD|default(-1)|int} R={0.0} G={1.0} B={1.0}

[gcode_macro _LED_SUCCESS]
gcode:
	_LED_SET TOOLHEAD={params.TOOLHEAD|default(-1)|int} R={0.0} G={1.0} B={0.0}

[gcode_macro _LED_ERROR]
gcode:
	_LED_SET TOOLHEAD={params.TOOLHEAD|default(-1)|int} R={1.0} G={0.0} B={0.0}

[gcode_macro _LED_ON]
gcode:
	_LED_SET TOOLHEAD={params.TOOLHEAD|default(-1)|int} R={1.0} G={1.0} B={1.0}

[gcode_macro _LED_OFF]
gcode:
	_LED_SET TOOLHEAD={params.TOOLHEAD|default(-1)|int} R={0.0} G={0.0} B={0.0}

[gcode_macro _LED_STANDBY]
gcode:
	_LED_SET TOOLHEAD={params.TOOLHEAD|default(-1)|int} R={0.1} G={0.1} B={0.1}

[gcode_macro _LED_SET]
gcode:
	# parameter
	{% set toolhead = params.TOOLHEAD|default(-1)|int %}
	{% set r = params.R|default(0)|float %}
	{% set g = params.G|default(0)|float %}
	{% set b = params.B|default(0)|float %}

	{% if toolhead >= 0 %}
		{% if printer['neopixel nozzle_led_t%s' % toolhead] is defined  %}
			SET_LED LED={'nozzle_led_t%s' % toolhead} RED={r} GREEN={g} BLUE={b} SYNC=0
		{% endif %}
	{% else %}
		{% if printer['neopixel nozzle_led_t0'] is defined  %}
			SET_LED LED={'nozzle_led_t0'} RED={r} GREEN={g} BLUE={b} SYNC=0
		{% endif %}
		{% if printer['neopixel nozzle_led_t1'] is defined %}
			SET_LED LED={'nozzle_led_t1'} RED={r} GREEN={g} BLUE={b} SYNC=0
		{% endif %}
	{% endif %}
